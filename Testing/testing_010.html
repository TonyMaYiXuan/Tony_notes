<!DOCTYPE html>
<html>
    <head>
        <script type="module">
            import { Octokit } from "https://cdn.skypack.dev/@octokit/rest";
            const octokit = new Octokit();
            var arr_file_name = [];
            var base64 = {
                PADCHAR: "=",
                ALPHA: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
                getbyte64: function (str, i) {
                    return base64.ALPHA.indexOf(str.charAt(i));
                }
            };
            base64.decode = function(s /* string */) { // I deleted throwing of exception, but you may refer to here: https://stackoverflow.com/a/11527586
                var getbyte64 = base64.getbyte64;
                var pads, i, b10;
                var imax = s.length;
                if (imax === 0) {
                    return s;
                }
                pads = 0
                if (s.charAt(imax - 1) === base64.PADCHAR) {
                    pads = 1;
                    if (s.charAt(imax - 2) === base64.PADCHAR) {
                        pads = 2;
                    }
                    imax -= 4;
                }
                var x = [];
                for (i = 0; i < imax; i += 4) {
                    b10 = (getbyte64(s,i) << 18) | (getbyte64(s,i+1) << 12) | (getbyte64(s,i+2) << 6) | getbyte64(s,i+3);
                    x.push(String.fromCharCode(b10 >> 16, (b10 >> 8) & 0xff, b10 & 0xff));
                }
                switch (pads) {
                case 1:
                    b10 = (getbyte64(s,i) << 18) | (getbyte64(s,i+1) << 12) | (getbyte64(s,i+2) << 6);
                    x.push(String.fromCharCode(b10 >> 16, (b10 >> 8) & 0xff));
                    break;
                case 2:
                    b10 = (getbyte64(s,i) << 18) | (getbyte64(s,i+1) << 12);
                    x.push(String.fromCharCode(b10 >> 16));
                    break;
                }
                return x.join('');
            }
            async function showFile() {
                const response = await octokit.request('GET /repos/tonymayixuan/Introducing_Rigorous_Mathematics/contents/PDF/Links_Google_Drive_PDF.txt', {
                    owner: 'tonymayixuan',
                    repo: 'Introducing_Rigorous_Mathematics',
                    path: 'PDF/Links_Google_Drive_PDF.txt'
                });
                var arr = base64.decode(response.data.content).split("\n");
                console.log(arr);
                document.getElementById("testing").innerHTML = arr[arr.length - 2];
            }
            showFile();
        </script>
    </head>
    <body>
        <p id="testing">Not-decoded</p>
    </body>
</html>
